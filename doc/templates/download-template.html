<!DOCTYPE html>
<html>

{{.Include "head.html"}}

<body>

{{.Include "header.html"}}

<h2> Prerequisites </h2>

To run <b>mumax3.11</b>, you need:

<ul>
    <li> An <b>NVIDIA GPU</b> with at least a compute capability <b>5.0</b>.</li>
    <li> An up-to-date <b>NVIDIA driver</b> (compatible driver versions are listed below).</li>
    <li> <b>Optional:</b> <a href="http://www.gnuplot.info/">gnuplot</a> for plots in the web GUI.</li>
</ul>

To check your installed driver version and GPU compute capability, run the following command in your terminal:
<pre><code>nvidia-smi --query-gpu="driver_version,compute_cap" --format="csv"</code></pre>

<h2> Download and installation </h2>

<p>
Select the platform and the NVIDIA driver for which you want to download mumax<sup>3</sup>. 
</p>

<div>
        <select id="platform" onchange="selectPlatform()">
            <option disabled selected value> -- Select platform -- </option>
            <option value="linux">Linux</option>
            <option value="windows">Windows</option>
        </select>
        <select id="driver" onchange="selectDriver()">
            <option disabled selected value> -- Select NVIDIA driver -- </option>
        </select>

        <a id="downloadLink" href="" >
        <button id="downloadButton" class="pure-button pure-button-primary">Download</button>
        </a>
    </fieldset>
</div>

<p>
After downloading and unpacking the archive, you will have a mumax<sup>3</sup> executable which is ready to be used. 
Note that mumax<sup>3</sup> is a command line application, so it is a good idea to add the directory containing 
the mumax<sup>3</sup> executable to the PATH environment variable.
</p>

<h2> Building mumax3.11 from the source </h2>

The source code of mumax3.11 as well as the build instructions for Linux can be found on <a href="https://www.github.com/mumax/3">GitHub</a>.

<script>

var driverOptions = {
    "linux" :[
        {'driverVersion':'≥450.36.06' , 'cudaVersion': '11.0' },
        {'driverVersion':'≥440.33'    , 'cudaVersion': '10.2' },
        {'driverVersion':'≥418.39'    , 'cudaVersion': '10.1' },
        {'driverVersion':'≥410.48'    , 'cudaVersion': '10.0' },
        {'driverVersion':'≥396.37'    , 'cudaVersion':  '9.2' },
        {'driverVersion':'≥390.46'    , 'cudaVersion':  '9.1' },
        {'driverVersion':'≥384.81'    , 'cudaVersion':  '9.0' },
        {'driverVersion':'≥375.26'    , 'cudaVersion':  '8.0' },
        {'driverVersion':'≥352.31'    , 'cudaVersion':  '7.5' },
        {'driverVersion':'≥346.46'    , 'cudaVersion':  '7.0' },
    ],
    "windows" :[
        {'driverVersion':"≥451.21" , 'cudaVersion': '11.0' },
        {'driverVersion':"≥441.22" , 'cudaVersion': '10.2' },
        {'driverVersion':"≥418.96" , 'cudaVersion': '10.1' },
        {'driverVersion':"≥411.31" , 'cudaVersion': '10.0' },
        {'driverVersion':"≥398.26" , 'cudaVersion':  '9.2' },
    ]
} 

function selectPlatform() {
    var driverSelector = document.getElementById("driver");
    var platformSelector = document.getElementById("platform");

    var platform = platformSelector.options[platformSelector.selectedIndex].value;

    // remove any driver options
    while (driverSelector.length > 1) {
        driverSelector.remove(1);
    }

    // Populate the driver selection box
    driverOptions[platform].forEach(function(driver,idx) {
        var option = document.createElement("option");
        option.text = driver.driverVersion;
        option.value = driver.cudaVersion; 
        driverSelector.add(option);
    })

    // Select the first driver option (the most recent one)
    driverSelector.selectedIndex = 0;
    document.getElementById("downloadButton").disabled = true;
    document.getElementById("downloadLink").removeAttribute("href");

}

function selectDriver() {
    var driverSelector = document.getElementById("driver");
    var platformSelector = document.getElementById("platform");
    var platform = platformSelector.options[platformSelector.selectedIndex].value;
    var cudaVersion = driverSelector.options[driverSelector.selectedIndex].value;
    var link;

    if (platform == "windows") {
        link = "https://mumax.ugent.be/mumax3-binaries/mumax3.11_windows_cuda" + cudaVersion + ".zip";
    } else if (platform == "linux") {
        link = "https://mumax.ugent.be/mumax3-binaries/mumax3.11_linux_cuda" + cudaVersion + ".tar.gz";
    } else {
        link = "#";
    }

    document.getElementById("downloadButton").disabled = false;
    document.getElementById("downloadLink").href = link
}

window.onload = function() {
    document.getElementById("driver").selectedIndex = 0;
    document.getElementById("platform"). selectedIndex = 0;
    document.getElementById("downloadButton").disabled = true;
    document.getElementById("downloadLink").removeAttribute("href");
}

</script>

</body>
</html>
